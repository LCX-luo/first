

# 如何实现轮播图？

### 1.容器样式

##### **最外层容器:**

需要属性overflow: hidden;

这是实现轮播图的关键，用来隐藏超出容器的图片

`position: relative;`为元素创建 “相对定位上下文”，其核心作用是**让元素相对于自身原本在文档流中的位置进行偏移**

##### 容器内需要一层图片轨道：

`display: flex;`让所有图片水平排列在一行

`height: 100%;`与容器高度一致

`transition: transform 0.5s ease;`为位置变化添加平滑过渡动画，实现滑动效果

##### 图片轨道内的图片：

`width: 100%; height: 100%;`：图片充满容器

`flex-shrink: 0;`：防止图片被压缩，保证每张图片都是完整尺寸

#### 切换图片的按钮

- `position: absolute;`：相对于轮播容器定位

- `top: 50%; transform: translateY(-50%);`：垂直居中

- `background: rgba(0, 0, 0, 0.5); color: white;`：半透明背景和白色文字

- `border: none; border-radius: 50%;`：圆形按钮

- `cursor: pointer;`：鼠标悬停显示手型

- `z-index: 10;`：确保按钮显示在图片上方，仅适用于设置了 `position: relative/absolute/fixed/sticky` 的元素，以及开启了 Flex/Grid 布局后子元素的 `z-index`（特殊场景）。普通静态元素（`position: static`，默认值）设置 `z-index` 无效

### 2.html

示例

```html
<div class="carousel">
        <!-- 新增：图片轨道容器，用于包裹所有图片 -->
        <div class="carousel-track">
            <div class="carousel-item">
                <img src="doro.png" alt="图片1">
                <p class="carousel-explanation">doro</p>
            </div>
            <!-- 继续添加-->
        </div>
        <button class="carousel-btn prev-btn"><-</button>
        <button class="carousel-btn next-btn">-></button>
    </div>
```

### 3.js

获取元素

```js
		const track = document.querySelector('.carousel-track');
        const images = document.querySelectorAll('.carousel img');
        const prevBtn = document.querySelector('.prev-btn');
        const nextBtn = document.querySelector('.next-btn');
        const carouselWidth = document.querySelector('.carousel').offsetWidth;
```

声明变量，用来说明显示图片的位置

```js
let currentIndex = 0;
```

**transform属性**:平移元素，常用写法是`transform: translateX(50px)`

${}用来写入变量

下面的函数实现了按照外部容器宽度为单位移动currentIndex个长度

```js
function updatePosition() {
            // 计算并设置位移，实现滑动效果
            track.style.transform = `translateX(-${currentIndex * carouselWidth}px)`;
        }
```

左右移动，

```js
// 下一张
        function nextImage() {
            currentIndex = (currentIndex + 1) % images.length;
            updatePosition();
        }
        // 上一张
        function prevImage() {
            currentIndex = (currentIndex - 1 + images.length) % images.length;
            updatePosition();
        }
```

其中的images.length是img元素的数量

**`setInterval`函数**

用于定时循环执行函数

setInterval（function，time），其中time单位是毫秒，1000=1s

```js
// 自动播放
        let autoplay = setInterval(nextImage, 3000);

```

绑定监听事件，实现按按钮主动播放，并添加鼠标悬停自动暂停播放

```js
// 按钮事件监听
        nextBtn.addEventListener('click', () => {
            clearInterval(autoplay); // 点击时清除自动播放
            nextImage();
            autoplay = setInterval(nextImage, 3000); // 重新启动自动播放
        });

        prevBtn.addEventListener('click', () => {
            clearInterval(autoplay);
            prevImage();
            autoplay = setInterval(nextImage, 3000);
        });

        // 鼠标悬停暂停自动播放
        document.querySelector('.carousel').addEventListener('mouseenter', () => {
            clearInterval(autoplay);
        });

        // 鼠标离开恢复自动播放
        document.querySelector('.carousel').addEventListener('mouseleave', () => {
            autoplay = setInterval(nextImage, 3000);
        });
```

